"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,e){var r;if(t)return"string"==typeof t?_arrayLikeToArray(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(t,e):void 0}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,a=new Array(e);r<e;r++)a[r]=t[r];return a}next_text="",category={},search="",order="",this_load_more="",data=[],urlParams=new URLSearchParams(window.location.search),first=!0,URLArray="",filterCheck=!1,searchCheck;var ajax_row_holder=document.querySelector(".ajax_row_holder"),row_items=document.querySelectorAll(".ajax_row"),select=document.querySelectorAll(".js-category-filter-select"),button=document.querySelectorAll(".js-category-filter"),form=document.getElementById("all_posts_filter"),searchInput=document.getElementById("all-post-search"),orderSelect=document.getElementById("js-post-order"),totalSelect=select.length,totalButton=button.length;function posts_per_page_fn(){0<row_items.length&&(posts_per_page=row_items[0].getAttribute("data-posts-per-page"))}function more_classes_fn(){0<row_items.length&&(more_classes=row_items[0].getAttribute("data-more-classes"))}function more_label_fn(){0<row_items.length&&(more_label=row_items[0].getAttribute("data-more-label"))}function prev_text_fn(){0<row_items.length&&(prev_text=row_items[0].getAttribute("data-prev-text"))}function next_text_fn(){0<row_items.length&&(next_text=row_items[0].getAttribute("data-next-text"))}function category_fn(){category={},URLArray="",first=!0,0<button.length&&0<document.querySelectorAll("button").length&&document.querySelectorAll("button").forEach(function(t){t.classList.contains("js-category-filter")&&document.querySelectorAll(".js-category-filter.active").forEach(function(t){var e;t.classList.contains("allCategories")||(e=t.getAttribute("data-taxonomy"),t=t.getAttribute("data-slug"),category[e]=category[e]&&Array.isArray(category[e])?[].concat(_toConsumableArray(category[e]),[t]):[t])})}),0<select.length&&0<document.querySelectorAll("select").length&&select.forEach(function(t){var e;t.value&&(e=t.getAttribute("data-taxonomy"),t=t.value,category[e]=category[e]&&Array.isArray(category[e])?[].concat(_toConsumableArray(category[e]),[t]):[t])}),Object.keys(category).forEach(function(t){first?(URLArray+=t+"="+category[t],first=!1):URLArray+="&"+t+"="+category[t]})}function all_param(){posts_per_page_fn(),posts_type_fn(),pagination_type_fn(),more_classes_fn(),more_label_fn(),prev_text_fn(),next_text_fn(),category_fn(),search=searchInput.value,order=orderSelect.value,this_load_more=document.querySelector(".load_more_holder"),""!==search&&(first?(URLArray+="filter_search="+search,first=!1):URLArray+="&filter_search="+search),window.history.pushState(null,null,"?"+URLArray),data={action:"loadmore",query:loadmore_params.posts,page:loadmore_params.current_page,posts_per_page:posts_per_page,post_type:posts_type,pagination_type:pagination_type,category:category,search:search,order:order,more_classes:more_classes,more_label:more_label,prev_text:prev_text,next_text:next_text}}searchCheck=!!urlParams.has("filter_search")&&(searchInput.value=urlParams.get("filter_search"),!0),document.addEventListener("click",function(t){var e;t.target&&"pagination_holder"==t.target.id&&(loadmore_params.current_page=t.target.getAttribute("data-slug"),all_param(),e=!0,t.target.classList.contains("load_more")&&(e=!1),fetch(loadmore_params.ajaxurl,{method:"POST",body:JSON.stringify(data),headers:{"Content-Type":"application/json"}}).then(function(t){return t.json()}).then(function(t){t&&(this_load_more.remove(),!0===e&&row_items.forEach(function(t){t.innerHTML=""}),row_items[0].insertAdjacentHTML("beforeend",t.html),ajax_row_holder.insertAdjacentHTML("beforeend",t.pagination),ajax_row_holder.style.opacity="1")}).then(function(){document.dispatchEvent(new Event("AjaxPaginationDone"))}))}),button.forEach(function(t){t.addEventListener("click",function(){t.classList.contains("multiply-false")?(button.forEach(function(t){t.classList.remove("active")}),t.classList.add("active")):t.classList.contains("active")?t.classList.remove("active"):t.classList.add("active")})}),document.querySelector(".js-clear-filter").addEventListener("click",function(){button.forEach(function(t){t.classList.remove("active")}),searchInput.value="",select.forEach(function(t){t.selectedIndex=0})}),orderSelect.addEventListener("change",function(){form.dispatchEvent(new Event("submit"))}),select.forEach(function(t){var e=t.getAttribute("data-taxonomy");urlParams.has(e)&&(t.value=urlParams.get(e),filterCheck=!0),filterCheck&&t===select[totalSelect-1]&&form.dispatchEvent(new Event("submit"))}),button.forEach(function(e,t){var r,a;e.classList.contains("allCategories")||(r=e.getAttribute("data-taxonomy"),a=e.getAttribute("data-slug"),urlParams.has(r)&&urlParams.get(r).split(",").forEach(function(t){t===a&&(e.classList.add("active"),filterCheck=!0)}),filterCheck&&t===totalButton-1&&form.dispatchEvent(new Event("submit")))}),!filterCheck&&searchCheck&&form.dispatchEvent(new Event("submit"));
//# sourceMappingURL=load_more_and_filter.js.map
