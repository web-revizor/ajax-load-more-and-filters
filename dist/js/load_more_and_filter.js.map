{"version":3,"file":"load_more_and_filter.js","sources":["load_more_and_filter.js"],"sourcesContent":["\"use strict\";\r\n\r\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\r\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\r\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\r\nnext_text = '', category = {}, search = '', order = '', this_load_more = '', data = [], urlParams = new URLSearchParams(window.location.search), first = true, URLArray = '', filterCheck = false, searchCheck;\r\nvar ajax_row_holder = document.querySelector('.ajax_row_holder');\r\nvar row_items = document.querySelectorAll('.ajax_row');\r\nvar select = document.querySelectorAll('.js-category-filter-select');\r\nvar button = document.querySelectorAll('.js-category-filter');\r\nvar form = document.getElementById('all_posts_filter');\r\nvar searchInput = document.getElementById('all-post-search');\r\nvar orderSelect = document.getElementById('js-post-order');\r\nvar totalSelect = select.length;\r\nvar totalButton = button.length;\r\nfunction posts_per_page_fn() {\r\n  if (row_items.length > 0) {\r\n    posts_per_page = row_items[0].getAttribute('data-posts-per-page');\r\n  }\r\n}\r\nfunction more_classes_fn() {\r\n  if (row_items.length > 0) {\r\n    more_classes = row_items[0].getAttribute('data-more-classes');\r\n  }\r\n}\r\nfunction more_label_fn() {\r\n  if (row_items.length > 0) {\r\n    more_label = row_items[0].getAttribute('data-more-label');\r\n  }\r\n}\r\nfunction prev_text_fn() {\r\n  if (row_items.length > 0) {\r\n    prev_text = row_items[0].getAttribute('data-prev-text');\r\n  }\r\n}\r\nfunction next_text_fn() {\r\n  if (row_items.length > 0) {\r\n    next_text = row_items[0].getAttribute('data-next-text');\r\n  }\r\n}\r\nfunction category_fn() {\r\n  category = {};\r\n  URLArray = '';\r\n  first = true;\r\n  if (button.length > 0 && document.querySelectorAll('button').length > 0) {\r\n    document.querySelectorAll('button').forEach(function (el) {\r\n      if (el.classList.contains('js-category-filter')) {\r\n        document.querySelectorAll('.js-category-filter.active').forEach(function (activeEl) {\r\n          if (!activeEl.classList.contains('allCategories')) {\r\n            var taxonomy = activeEl.getAttribute('data-taxonomy');\r\n            var slug = activeEl.getAttribute('data-slug');\r\n            category[taxonomy] = category[taxonomy] && Array.isArray(category[taxonomy]) ? [].concat(_toConsumableArray(category[taxonomy]), [slug]) : [slug];\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n  if (select.length > 0 && document.querySelectorAll('select').length > 0) {\r\n    select.forEach(function (el) {\r\n      if (el.value) {\r\n        var taxonomy = el.getAttribute('data-taxonomy');\r\n        var slug = el.value;\r\n        category[taxonomy] = category[taxonomy] && Array.isArray(category[taxonomy]) ? [].concat(_toConsumableArray(category[taxonomy]), [slug]) : [slug];\r\n      }\r\n    });\r\n  }\r\n  Object.keys(category).forEach(function (i) {\r\n    if (first) {\r\n      URLArray += i + '=' + category[i];\r\n      first = false;\r\n    } else {\r\n      URLArray += '&' + i + '=' + category[i];\r\n    }\r\n  });\r\n}\r\nfunction all_param() {\r\n  posts_per_page_fn();\r\n  posts_type_fn();\r\n  pagination_type_fn();\r\n  more_classes_fn();\r\n  more_label_fn();\r\n  prev_text_fn();\r\n  next_text_fn();\r\n  category_fn();\r\n  search = searchInput.value;\r\n  order = orderSelect.value;\r\n  this_load_more = document.querySelector('.load_more_holder');\r\n  if (search !== '') {\r\n    if (first) {\r\n      URLArray += 'filter_search=' + search;\r\n      first = false;\r\n    } else {\r\n      URLArray += '&filter_search=' + search;\r\n    }\r\n  }\r\n  window.history.pushState(null, null, '?' + URLArray);\r\n  data = {\r\n    action: 'loadmore',\r\n    query: loadmore_params.posts,\r\n    page: loadmore_params.current_page,\r\n    posts_per_page: posts_per_page,\r\n    post_type: posts_type,\r\n    pagination_type: pagination_type,\r\n    category: category,\r\n    search: search,\r\n    order: order,\r\n    more_classes: more_classes,\r\n    more_label: more_label,\r\n    prev_text: prev_text,\r\n    next_text: next_text\r\n  };\r\n}\r\nif (urlParams.has('filter_search')) {\r\n  searchInput.value = urlParams.get('filter_search');\r\n  searchCheck = true;\r\n} else {\r\n  searchCheck = false;\r\n}\r\ndocument.addEventListener('click', function (e) {\r\n  if (e.target && e.target.id == 'pagination_holder') {\r\n    loadmore_params.current_page = e.target.getAttribute('data-slug');\r\n    all_param();\r\n    var clearRow = true;\r\n    if (e.target.classList.contains('load_more')) {\r\n      clearRow = false;\r\n    }\r\n    fetch(loadmore_params.ajaxurl, {\r\n      method: 'POST',\r\n      body: JSON.stringify(data),\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      }\r\n    }).then(function (response) {\r\n      return response.json();\r\n    }).then(function (data) {\r\n      if (data) {\r\n        this_load_more.remove();\r\n        if (clearRow === true) {\r\n          row_items.forEach(function (el) {\r\n            el.innerHTML = '';\r\n          });\r\n        }\r\n        row_items[0].insertAdjacentHTML('beforeend', data.html);\r\n        ajax_row_holder.insertAdjacentHTML('beforeend', data.pagination);\r\n        ajax_row_holder.style.opacity = '1';\r\n      }\r\n    }).then(function () {\r\n      document.dispatchEvent(new Event('AjaxPaginationDone'));\r\n    });\r\n  }\r\n});\r\nbutton.forEach(function (el) {\r\n  el.addEventListener('click', function () {\r\n    if (el.classList.contains('multiply-false')) {\r\n      button.forEach(function (btn) {\r\n        btn.classList.remove('active');\r\n      });\r\n      el.classList.add('active');\r\n    } else {\r\n      if (!el.classList.contains('active')) {\r\n        el.classList.add('active');\r\n      } else {\r\n        el.classList.remove('active');\r\n      }\r\n    }\r\n  });\r\n});\r\ndocument.querySelector('.js-clear-filter').addEventListener('click', function () {\r\n  button.forEach(function (btn) {\r\n    btn.classList.remove('active');\r\n  });\r\n  searchInput.value = '';\r\n  select.forEach(function (sel) {\r\n    sel.selectedIndex = 0;\r\n  });\r\n});\r\norderSelect.addEventListener('change', function () {\r\n  form.dispatchEvent(new Event('submit'));\r\n});\r\nselect.forEach(function (el) {\r\n  var taxonomy = el.getAttribute('data-taxonomy');\r\n  if (urlParams.has(taxonomy)) {\r\n    el.value = urlParams.get(taxonomy);\r\n    filterCheck = true;\r\n  }\r\n  if (filterCheck && el === select[totalSelect - 1]) {\r\n    form.dispatchEvent(new Event('submit'));\r\n  }\r\n});\r\nbutton.forEach(function (el, index) {\r\n  if (!el.classList.contains('allCategories')) {\r\n    var taxonomy = el.getAttribute('data-taxonomy');\r\n    var slug = el.getAttribute('data-slug');\r\n    if (urlParams.has(taxonomy)) {\r\n      var array = urlParams.get(taxonomy).split(',');\r\n      array.forEach(function (v) {\r\n        if (v === slug) {\r\n          el.classList.add('active');\r\n          filterCheck = true;\r\n        }\r\n      });\r\n    }\r\n    if (filterCheck && index === totalButton - 1) {\r\n      form.dispatchEvent(new Event('submit'));\r\n    }\r\n  }\r\n});\r\nif (!filterCheck && searchCheck) {\r\n  form.dispatchEvent(new Event('submit'));\r\n}"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","n","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","next_text","category","search","order","this_load_more","data","urlParams","URLSearchParams","window","location","first","URLArray","filterCheck","searchCheck","ajax_row_holder","document","querySelector","row_items","querySelectorAll","select","button","form","getElementById","searchInput","orderSelect","totalSelect","totalButton","posts_per_page_fn","posts_per_page","getAttribute","more_classes_fn","more_classes","more_label_fn","more_label","prev_text_fn","prev_text","next_text_fn","category_fn","forEach","el","classList","contains","activeEl","taxonomy","slug","concat","value","keys","all_param","posts_type_fn","pagination_type_fn","history","pushState","action","query","loadmore_params","posts","page","current_page","post_type","posts_type","pagination_type","has","get","addEventListener","e","clearRow","target","id","fetch","ajaxurl","method","body","JSON","stringify","headers","Content-Type","then","response","json","remove","innerHTML","insertAdjacentHTML","html","pagination","style","opacity","dispatchEvent","Event","btn","add","sel","selectedIndex","index","split","v"],"mappings":"AAAA,aAEA,SAASA,mBAAmBC,GAAO,OAAOC,mBAAmBD,CAAG,GAAKE,iBAAiBF,CAAG,GAAKG,4BAA4BH,CAAG,GAAKI,mBAAmB,CAAG,CACxJ,SAASA,qBAAuB,MAAM,IAAIC,UAAU,sIAAsI,CAAG,CAC7L,SAASF,4BAA4BG,EAAGC,GAAU,IAAoFC,EAApF,GAAKF,EAAW,MAAiB,UAAb,OAAOA,EAAuBG,kBAAkBH,EAAGC,CAAM,EAAkI,SAAlCC,EAA3B,YAA9DA,EAAIE,OAAOC,UAAUC,SAASC,KAAKP,CAAC,EAAEQ,MAAM,EAAG,CAAC,CAAC,IAAyBR,EAAES,YAAiBT,EAAES,YAAYC,KAAUR,IAAqB,QAANA,EAAoBS,MAAMC,KAAKZ,CAAC,EAAa,cAANE,GAAqB,2CAA2CW,KAAKX,CAAC,EAAUC,kBAAkBH,EAAGC,CAAM,EAA/G,KAAA,CAAkH,CAC/Z,SAASL,iBAAiBkB,GAAQ,GAAsB,aAAlB,OAAOC,QAAmD,MAAzBD,EAAKC,OAAOC,WAA2C,MAAtBF,EAAK,cAAuB,OAAOH,MAAMC,KAAKE,CAAI,CAAG,CAC7J,SAASnB,mBAAmBD,GAAO,GAAIiB,MAAMM,QAAQvB,CAAG,EAAG,OAAOS,kBAAkBT,CAAG,CAAG,CAC1F,SAASS,kBAAkBT,EAAKwB,IAAkB,MAAPA,GAAeA,EAAMxB,EAAIyB,UAAQD,EAAMxB,EAAIyB,QAAQ,IAAK,IAAIC,EAAI,EAAGC,EAAO,IAAIV,MAAMO,CAAG,EAAGE,EAAIF,EAAKE,CAAC,GAAIC,EAAKD,GAAK1B,EAAI0B,GAAI,OAAOC,CAAM,CAClLC,UAAY,GAAIC,SAAW,GAAIC,OAAS,GAAIC,MAAQ,GAAIC,eAAiB,GAAIC,KAAO,GAAIC,UAAY,IAAIC,gBAAgBC,OAAOC,SAASP,MAAM,EAAGQ,MAAQ,CAAA,EAAMC,SAAW,GAAIC,YAAc,CAAA,EAAOC,YACnM,IAAIC,gBAAkBC,SAASC,cAAc,kBAAkB,EAC3DC,UAAYF,SAASG,iBAAiB,WAAW,EACjDC,OAASJ,SAASG,iBAAiB,4BAA4B,EAC/DE,OAASL,SAASG,iBAAiB,qBAAqB,EACxDG,KAAON,SAASO,eAAe,kBAAkB,EACjDC,YAAcR,SAASO,eAAe,iBAAiB,EACvDE,YAAcT,SAASO,eAAe,eAAe,EACrDG,YAAcN,OAAOtB,OACrB6B,YAAcN,OAAOvB,OACzB,SAAS8B,oBACgB,EAAnBV,UAAUpB,SACZ+B,eAAiBX,UAAU,GAAGY,aAAa,qBAAqB,EAEpE,CACA,SAASC,kBACgB,EAAnBb,UAAUpB,SACZkC,aAAed,UAAU,GAAGY,aAAa,mBAAmB,EAEhE,CACA,SAASG,gBACgB,EAAnBf,UAAUpB,SACZoC,WAAahB,UAAU,GAAGY,aAAa,iBAAiB,EAE5D,CACA,SAASK,eACgB,EAAnBjB,UAAUpB,SACZsC,UAAYlB,UAAU,GAAGY,aAAa,gBAAgB,EAE1D,CACA,SAASO,eACgB,EAAnBnB,UAAUpB,SACZG,UAAYiB,UAAU,GAAGY,aAAa,gBAAgB,EAE1D,CACA,SAASQ,cACPpC,SAAW,GACXU,SAAW,GACXD,MAAQ,CAAA,EACY,EAAhBU,OAAOvB,QAA2D,EAA7CkB,SAASG,iBAAiB,QAAQ,EAAErB,QAC3DkB,SAASG,iBAAiB,QAAQ,EAAEoB,QAAQ,SAAUC,GAChDA,EAAGC,UAAUC,SAAS,oBAAoB,GAC5C1B,SAASG,iBAAiB,4BAA4B,EAAEoB,QAAQ,SAAUI,GACxE,IACMC,EADDD,EAASF,UAAUC,SAAS,eAAe,IAC1CE,EAAWD,EAASb,aAAa,eAAe,EAChDe,EAAOF,EAASb,aAAa,WAAW,EAC5C5B,SAAS0C,GAAY1C,SAAS0C,IAAatD,MAAMM,QAAQM,SAAS0C,EAAS,EAAI,GAAGE,OAAO1E,mBAAmB8B,SAAS0C,EAAS,EAAG,CAACC,EAAK,EAAI,CAACA,GAEhJ,CAAC,CAEL,CAAC,EAEiB,EAAhBzB,OAAOtB,QAA2D,EAA7CkB,SAASG,iBAAiB,QAAQ,EAAErB,QAC3DsB,OAAOmB,QAAQ,SAAUC,GACvB,IACMI,EADFJ,EAAGO,QACDH,EAAWJ,EAAGV,aAAa,eAAe,EAC1Ce,EAAOL,EAAGO,MACd7C,SAAS0C,GAAY1C,SAAS0C,IAAatD,MAAMM,QAAQM,SAAS0C,EAAS,EAAI,GAAGE,OAAO1E,mBAAmB8B,SAAS0C,EAAS,EAAG,CAACC,EAAK,EAAI,CAACA,GAEhJ,CAAC,EAEH9D,OAAOiE,KAAK9C,QAAQ,EAAEqC,QAAQ,SAAUxC,GAClCY,OACFC,UAAYb,EAAI,IAAMG,SAASH,GAC/BY,MAAQ,CAAA,GAERC,UAAY,IAAMb,EAAI,IAAMG,SAASH,EAEzC,CAAC,CACH,CACA,SAASkD,YACPrB,kBAAkB,EAClBsB,cAAc,EACdC,mBAAmB,EACnBpB,gBAAgB,EAChBE,cAAc,EACdE,aAAa,EACbE,aAAa,EACbC,YAAY,EACZnC,OAASqB,YAAYuB,MACrB3C,MAAQqB,YAAYsB,MACpB1C,eAAiBW,SAASC,cAAc,mBAAmB,EAC5C,KAAXd,SACEQ,OACFC,UAAY,iBAAmBT,OAC/BQ,MAAQ,CAAA,GAERC,UAAY,kBAAoBT,QAGpCM,OAAO2C,QAAQC,UAAU,KAAM,KAAM,IAAMzC,QAAQ,EACnDN,KAAO,CACLgD,OAAQ,WACRC,MAAOC,gBAAgBC,MACvBC,KAAMF,gBAAgBG,aACtB9B,eAAgBA,eAChB+B,UAAWC,WACXC,gBAAiBA,gBACjB5D,SAAUA,SACVC,OAAQA,OACRC,MAAOA,MACP4B,aAAcA,aACdE,WAAYA,WACZE,UAAWA,UACXnC,UAAWA,SACb,CACF,CAGEa,YAFEP,CAAAA,CAAAA,UAAUwD,IAAI,eAAe,IAC/BvC,YAAYuB,MAAQxC,UAAUyD,IAAI,eAAe,EACnC,CAAA,GAIhBhD,SAASiD,iBAAiB,QAAS,SAAUC,GAC3C,IAGMC,EAHFD,EAAEE,QAAyB,qBAAfF,EAAEE,OAAOC,KACvBb,gBAAgBG,aAAeO,EAAEE,OAAOtC,aAAa,WAAW,EAChEmB,UAAU,EACNkB,EAAW,CAAA,EACXD,EAAEE,OAAO3B,UAAUC,SAAS,WAAW,IACzCyB,EAAW,CAAA,GAEbG,MAAMd,gBAAgBe,QAAS,CAC7BC,OAAQ,OACRC,KAAMC,KAAKC,UAAUrE,IAAI,EACzBsE,QAAS,CACPC,eAAgB,kBAClB,CACF,CAAC,EAAEC,KAAK,SAAUC,GAChB,OAAOA,EAASC,KAAK,CACvB,CAAC,EAAEF,KAAK,SAAUxE,GACZA,IACFD,eAAe4E,OAAO,EACL,CAAA,IAAbd,GACFjD,UAAUqB,QAAQ,SAAUC,GAC1BA,EAAG0C,UAAY,EACjB,CAAC,EAEHhE,UAAU,GAAGiE,mBAAmB,YAAa7E,EAAK8E,IAAI,EACtDrE,gBAAgBoE,mBAAmB,YAAa7E,EAAK+E,UAAU,EAC/DtE,gBAAgBuE,MAAMC,QAAU,IAEpC,CAAC,EAAET,KAAK,WACN9D,SAASwE,cAAc,IAAIC,MAAM,oBAAoB,CAAC,CACxD,CAAC,EAEL,CAAC,EACDpE,OAAOkB,QAAQ,SAAUC,GACvBA,EAAGyB,iBAAiB,QAAS,WACvBzB,EAAGC,UAAUC,SAAS,gBAAgB,GACxCrB,OAAOkB,QAAQ,SAAUmD,GACvBA,EAAIjD,UAAUwC,OAAO,QAAQ,CAC/B,CAAC,EACDzC,EAAGC,UAAUkD,IAAI,QAAQ,GAEpBnD,EAAGC,UAAUC,SAAS,QAAQ,EAGjCF,EAAGC,UAAUwC,OAAO,QAAQ,EAF5BzC,EAAGC,UAAUkD,IAAI,QAAQ,CAK/B,CAAC,CACH,CAAC,EACD3E,SAASC,cAAc,kBAAkB,EAAEgD,iBAAiB,QAAS,WACnE5C,OAAOkB,QAAQ,SAAUmD,GACvBA,EAAIjD,UAAUwC,OAAO,QAAQ,CAC/B,CAAC,EACDzD,YAAYuB,MAAQ,GACpB3B,OAAOmB,QAAQ,SAAUqD,GACvBA,EAAIC,cAAgB,CACtB,CAAC,CACH,CAAC,EACDpE,YAAYwC,iBAAiB,SAAU,WACrC3C,KAAKkE,cAAc,IAAIC,MAAM,QAAQ,CAAC,CACxC,CAAC,EACDrE,OAAOmB,QAAQ,SAAUC,GACvB,IAAII,EAAWJ,EAAGV,aAAa,eAAe,EAC1CvB,UAAUwD,IAAInB,CAAQ,IACxBJ,EAAGO,MAAQxC,UAAUyD,IAAIpB,CAAQ,EACjC/B,YAAc,CAAA,GAEZA,aAAe2B,IAAOpB,OAAOM,YAAc,IAC7CJ,KAAKkE,cAAc,IAAIC,MAAM,QAAQ,CAAC,CAE1C,CAAC,EACDpE,OAAOkB,QAAQ,SAAUC,EAAIsD,GAC3B,IACMlD,EACAC,EAFDL,EAAGC,UAAUC,SAAS,eAAe,IACpCE,EAAWJ,EAAGV,aAAa,eAAe,EAC1Ce,EAAOL,EAAGV,aAAa,WAAW,EAClCvB,UAAUwD,IAAInB,CAAQ,GACZrC,UAAUyD,IAAIpB,CAAQ,EAAEmD,MAAM,GAAG,EACvCxD,QAAQ,SAAUyD,GAClBA,IAAMnD,IACRL,EAAGC,UAAUkD,IAAI,QAAQ,EACzB9E,YAAc,CAAA,EAElB,CAAC,EAECA,aAAeiF,IAAUnE,YAAc,GACzCL,KAAKkE,cAAc,IAAIC,MAAM,QAAQ,CAAC,EAG5C,CAAC,EACG,CAAC5E,aAAeC,aAClBQ,KAAKkE,cAAc,IAAIC,MAAM,QAAQ,CAAC"}