{"version":3,"file":"load_more_and_filter.js","sources":["load_more_and_filter.js"],"sourcesContent":["\"use strict\";\r\n\r\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\r\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\r\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\r\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\r\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\r\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\r\njQuery(function ($) {\r\n  var posts_per_page = '',\r\n    posts_type = '',\r\n    pagination_type = '',\r\n    more_classes = '',\r\n    more_label = '',\r\n    prev_text = '',\r\n    next_text = '',\r\n    category = {},\r\n    search = '',\r\n    order = '',\r\n    this_load_more = '',\r\n    data = [],\r\n    urlParams = new URLSearchParams(window.location.search),\r\n    first = true,\r\n    URLArray = '',\r\n    filterCheck = false,\r\n    searchCheck;\r\n  var ajax_row_holder = $('.ajax_row_holder');\r\n  var row_items = $('.ajax_row');\r\n  var $select = $('.js-category-filter-select');\r\n  var $button = $('.js-category-filter');\r\n  var $form = $('#all_posts_filter');\r\n  var $search = $('#all-post-search');\r\n  var $order = $('#js-post-order');\r\n  var totalSelect = $select.length;\r\n  var totalButton = $button.length;\r\n  function posts_per_page_fn() {\r\n    posts_per_page = row_items.attr('data-posts-per-page');\r\n  }\r\n  function posts_type_fn() {\r\n    posts_type = row_items.attr('data-posts-type');\r\n  }\r\n  function pagination_type_fn() {\r\n    pagination_type = row_items.attr('data-pagination-type');\r\n  }\r\n  function more_classes_fn() {\r\n    more_classes = row_items.attr('data-more-classes');\r\n  }\r\n  function more_label_fn() {\r\n    more_label = row_items.attr('data-more-label');\r\n  }\r\n  function prev_text_fn() {\r\n    prev_text = row_items.attr('data-prev-text');\r\n  }\r\n  function next_text_fn() {\r\n    next_text = row_items.attr('data-next-text');\r\n  }\r\n  function category_fn() {\r\n    category = {};\r\n    URLArray = '';\r\n    first = true;\r\n    if ($('button').hasClass('js-category-filter')) {\r\n      $('.js-category-filter.active').each(function () {\r\n        if (!$(this).hasClass('allCategories')) {\r\n          var taxonomy = $(this).attr('data-taxonomy');\r\n          var slug = $(this).attr('data-slug');\r\n          category[taxonomy] = category[taxonomy] && Array.isArray(category[taxonomy]) ? [].concat(_toConsumableArray(category[taxonomy]), [slug]) : [slug];\r\n        }\r\n      });\r\n    }\r\n    if ($('select').hasClass('js-category-filter-select')) {\r\n      $select.each(function () {\r\n        if ($(this).val()) {\r\n          var taxonomy = $(this).attr('data-taxonomy');\r\n          var slug = $(this).val();\r\n          category[taxonomy] = category[taxonomy] && Array.isArray(category[taxonomy]) ? [].concat(_toConsumableArray(category[taxonomy]), [slug]) : [slug];\r\n        }\r\n      });\r\n    }\r\n    $.each(category, function (i, v) {\r\n      if (first) {\r\n        URLArray += i + '=' + v;\r\n        first = false;\r\n      } else {\r\n        URLArray += '&' + i + '=' + v;\r\n      }\r\n    });\r\n  }\r\n  function all_param() {\r\n    posts_per_page_fn();\r\n    posts_type_fn();\r\n    pagination_type_fn();\r\n    more_classes_fn();\r\n    more_label_fn();\r\n    prev_text_fn();\r\n    next_text_fn();\r\n    category_fn();\r\n    search = $search.val();\r\n    order = $order.val();\r\n    this_load_more = $('.load_more_holder');\r\n    if (search !== '') {\r\n      if (first) {\r\n        URLArray += 'filter_search=' + search;\r\n        first = false;\r\n      } else {\r\n        URLArray += '&filter_search=' + search;\r\n      }\r\n    }\r\n    if (URLArray !== '') {\r\n      window.history.pushState(null, null, '?' + URLArray);\r\n    } else {\r\n      var clean_uri = location.protocol + '//' + location.host + location.pathname;\r\n      window.history.pushState(null, null, clean_uri);\r\n    }\r\n    data = {\r\n      action: 'loadmore',\r\n      query: loadmore_params.posts,\r\n      page: loadmore_params.current_page,\r\n      posts_per_page: posts_per_page,\r\n      post_type: posts_type,\r\n      pagination_type: pagination_type,\r\n      category: category,\r\n      search: search,\r\n      order: order,\r\n      more_classes: more_classes,\r\n      more_label: more_label,\r\n      prev_text: prev_text,\r\n      next_text: next_text\r\n    };\r\n  }\r\n  if (urlParams.has('filter_search')) {\r\n    $search.val(urlParams.get('filter_search'));\r\n    searchCheck = true;\r\n  } else {\r\n    searchCheck = false;\r\n  }\r\n  $(document).on('click', '#pagination_holder .load_page', function (e) {\r\n    e.preventDefault();\r\n    loadmore_params.current_page = $(this).data('slug');\r\n    all_param();\r\n    var clearRow = true;\r\n    if ($(this).hasClass('load_more')) {\r\n      clearRow = false;\r\n    }\r\n    $.ajax({\r\n      url: loadmore_params.ajaxurl,\r\n      data: data,\r\n      type: 'POST',\r\n      beforeSend: function beforeSend(xhr) {\r\n        ajax_row_holder.css('opacity', '0.5');\r\n      },\r\n      success: function success(data) {\r\n        if (data) {\r\n          this_load_more.remove();\r\n          if (clearRow === true) {\r\n            row_items.empty();\r\n          }\r\n          row_items.append(data.html);\r\n          ajax_row_holder.append(data.pagination);\r\n          ajax_row_holder.css('opacity', '1');\r\n        }\r\n      }\r\n    }).done(function () {\r\n      $(document).trigger('AjaxPaginationDone');\r\n    });\r\n  });\r\n  $button.on('click', function () {\r\n    if ($(this).hasClass('multiply-false')) {\r\n      $button.removeClass('active');\r\n      $(this).addClass('active');\r\n    } else {\r\n      if (!$(this).hasClass('active')) {\r\n        $(this).addClass('active');\r\n      } else {\r\n        $(this).removeClass('active');\r\n      }\r\n    }\r\n  });\r\n  $('.js-clear-filter').on('click', function () {\r\n    $button.removeClass('active');\r\n    $search.val('');\r\n    $select.prop('selectedIndex', 0);\r\n  });\r\n  $order.on('change', function () {\r\n    $form.trigger('submit');\r\n  });\r\n  $select.on('change', function () {\r\n    $form.trigger('submit');\r\n  });\r\n  $form.on('submit', function (e) {\r\n    e.preventDefault();\r\n    loadmore_params.current_page = 1;\r\n    all_param();\r\n    $.ajax({\r\n      url: loadmore_params.ajaxurl,\r\n      data: data,\r\n      type: 'POST',\r\n      beforeSend: function beforeSend(xhr) {\r\n        ajax_row_holder.css('opacity', '0.5');\r\n      },\r\n      success: function success(data) {\r\n        if (data) {\r\n          this_load_more.remove();\r\n          row_items.empty();\r\n          if (data.html !== '') {\r\n            row_items.append(data.html);\r\n          } else {\r\n            row_items.append('<div class=\"no-results-found\">no results found</div>');\r\n          }\r\n          ajax_row_holder.append(data.pagination);\r\n          ajax_row_holder.css('opacity', '1');\r\n        }\r\n      }\r\n    }).done(function () {\r\n      $(document).trigger('AjaxFilterDone');\r\n    });\r\n  });\r\n  $select.each(function (index) {\r\n    var taxonomy = $(this).attr('data-taxonomy');\r\n    if (urlParams.has(taxonomy)) {\r\n      $(this).val(urlParams.get(taxonomy));\r\n      filterCheck = true;\r\n    }\r\n    if (index === totalSelect - 1 && filterCheck) {\r\n      $form.trigger('submit');\r\n    }\r\n  });\r\n  $button.each(function (index) {\r\n    if (!$(this).hasClass('allCategories')) {\r\n      var $this = $(this);\r\n      var taxonomy = $this.attr('data-taxonomy');\r\n      var slug = $this.attr('data-slug');\r\n      if (urlParams.has(taxonomy)) {\r\n        var array = urlParams.get(taxonomy).split(',');\r\n        $.each(array, function (i, v) {\r\n          if (v === slug) {\r\n            $this.addClass('active');\r\n            filterCheck = true;\r\n          }\r\n        });\r\n      }\r\n    }\r\n    if (index === totalButton - 1 && filterCheck) {\r\n      $form.trigger('submit');\r\n    }\r\n  });\r\n  if (!filterCheck && searchCheck) {\r\n    $form.trigger('submit');\r\n  }\r\n});"],"names":["_toConsumableArray","arr","_arrayWithoutHoles","_iterableToArray","_unsupportedIterableToArray","_nonIterableSpread","TypeError","o","minLen","n","_arrayLikeToArray","Object","prototype","toString","call","slice","constructor","name","Array","from","test","iter","Symbol","iterator","isArray","len","length","i","arr2","jQuery","$","searchCheck","posts_per_page","posts_type","pagination_type","more_classes","more_label","prev_text","next_text","category","search","order","this_load_more","data","urlParams","URLSearchParams","window","location","first","URLArray","filterCheck","ajax_row_holder","row_items","$select","$button","$form","$search","$order","totalSelect","totalButton","all_param","clean_uri","attr","hasClass","each","taxonomy","slug","this","concat","val","v","history","pushState","protocol","host","pathname","action","query","loadmore_params","posts","page","current_page","post_type","has","get","document","on","e","preventDefault","clearRow","ajax","url","ajaxurl","type","beforeSend","xhr","css","success","remove","empty","append","html","pagination","done","trigger","removeClass","addClass","prop","index","$this","array","split"],"mappings":"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"}