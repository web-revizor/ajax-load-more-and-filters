{"version":3,"file":"load_more_and_filter.js","sources":["load_more_and_filter.js"],"sourcesContent":["\"use strict\";\r\n\r\njQuery(function ($) {\r\n  var row_items = $('.ajax_row'),\r\n    ajax_row_holder = $('.ajax_row_holder'),\r\n    posts_per_page = '',\r\n    posts_type = '',\r\n    pagination_type = '',\r\n    taxonomy_type = '',\r\n    more_classes = '',\r\n    more_label = '',\r\n    prev_text = '',\r\n    next_text = '',\r\n    category = '',\r\n    search = '',\r\n    order = '',\r\n    this_load_more = '',\r\n    data = [];\r\n  function posts_per_page_fn() {\r\n    posts_per_page = row_items.attr('data-posts-per-page');\r\n  }\r\n  function posts_type_fn() {\r\n    posts_type = row_items.attr('data-posts-type');\r\n  }\r\n  function pagination_type_fn() {\r\n    pagination_type = row_items.attr('data-pagination-type');\r\n  }\r\n  function taxonomy_type_fn() {\r\n    taxonomy_type = row_items.attr('data-taxonomy');\r\n  }\r\n  function more_classes_fn() {\r\n    more_classes = row_items.attr('data-more-classes');\r\n  }\r\n  function more_label_fn() {\r\n    more_label = row_items.attr('data-more-label');\r\n  }\r\n  function prev_text_fn() {\r\n    prev_text = row_items.attr('data-prev-text');\r\n  }\r\n  function next_text_fn() {\r\n    next_text = row_items.attr('data-next-text');\r\n  }\r\n  function all_param() {\r\n    posts_per_page_fn();\r\n    posts_type_fn();\r\n    pagination_type_fn();\r\n    taxonomy_type_fn();\r\n    more_classes_fn();\r\n    more_label_fn();\r\n    prev_text_fn();\r\n    next_text_fn();\r\n    category = $('.js-category-filter.active').attr('data-slug');\r\n    search = $('#all-post-search').val();\r\n    order = $('#js-post-order').val();\r\n    this_load_more = $('.load_more_holder');\r\n    data = {\r\n      'action': 'loadmore',\r\n      'query': loadmore_params.posts,\r\n      'page': loadmore_params.current_page,\r\n      'posts_per_page': posts_per_page,\r\n      'post_type': posts_type,\r\n      'pagination_type': pagination_type,\r\n      'category': category,\r\n      'taxonomy_type': taxonomy_type,\r\n      'search': search,\r\n      'order': order,\r\n      'more_classes': more_classes,\r\n      'more_label': more_label,\r\n      'prev_text': prev_text,\r\n      'next_text': next_text\r\n    };\r\n  }\r\n  $(document).on('click', '#pagination_holder .load_page', function (e) {\r\n    e.preventDefault();\r\n    loadmore_params.current_page = $(this).data('slug');\r\n    all_param();\r\n    var clearRow = true;\r\n    if ($(this).hasClass('load_more')) {\r\n      clearRow = false;\r\n    }\r\n    $.ajax({\r\n      url: loadmore_params.ajaxurl,\r\n      data: data,\r\n      type: 'POST',\r\n      beforeSend: function beforeSend(xhr) {\r\n        ajax_row_holder.css(\"opacity\", \"0.5\");\r\n      },\r\n      success: function success(data) {\r\n        if (data) {\r\n          this_load_more.remove();\r\n          if (clearRow === true) {\r\n            row_items.empty();\r\n            $('html,body').stop().animate({\r\n              scrollTop: row_items.offset().top\r\n            }, 300);\r\n          }\r\n          row_items.append(data.html);\r\n          ajax_row_holder.append(data.pagination);\r\n          ajax_row_holder.css(\"opacity\", \"1\");\r\n        }\r\n      }\r\n    }).done(function () {\r\n      $(document).trigger('AjaxPaginationDone');\r\n    });\r\n  });\r\n  $('.js-category-filter').on('click', function () {\r\n    if (!$(this).hasClass('active')) {\r\n      $('.js-category-filter').removeClass('active');\r\n      $(this).addClass('active');\r\n    } else {\r\n      $('.js-category-filter').removeClass('active');\r\n    }\r\n  });\r\n  $('#js-post-order').on('change', function () {\r\n    $('#all_posts_filter').trigger('submit');\r\n  });\r\n  $('#all_posts_filter').on('submit', function (e) {\r\n    e.preventDefault();\r\n    loadmore_params.current_page = 1;\r\n    all_param();\r\n    $.ajax({\r\n      url: loadmore_params.ajaxurl,\r\n      data: data,\r\n      type: 'POST',\r\n      beforeSend: function beforeSend(xhr) {\r\n        ajax_row_holder.css(\"opacity\", \"0.5\");\r\n      },\r\n      success: function success(data) {\r\n        if (data) {\r\n          this_load_more.remove();\r\n          row_items.empty();\r\n          row_items.append(data.html);\r\n          ajax_row_holder.append(data.pagination);\r\n          ajax_row_holder.css(\"opacity\", \"1\");\r\n        }\r\n      }\r\n    }).done(function () {\r\n      $(document).trigger('AjaxFilterDone');\r\n    });\r\n  });\r\n});"],"names":["jQuery","$","row_items","ajax_row_holder","posts_per_page","posts_type","pagination_type","taxonomy_type","more_classes","more_label","prev_text","next_text","category","search","order","this_load_more","data","all_param","attr","val","action","query","loadmore_params","posts","page","current_page","post_type","document","on","e","preventDefault","this","clearRow","hasClass","ajax","url","ajaxurl","type","beforeSend","xhr","css","success","remove","empty","stop","animate","scrollTop","offset","top","append","html","pagination","done","trigger","removeClass","addClass"],"mappings":"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"}